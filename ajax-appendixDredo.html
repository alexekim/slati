<style>
  #content-well {
    display: none;
  }

  /*.stateRow{
    display: none;
  }*/

  .bold {
    font-weight: bold;
  }

  .even {
    background: #f2f2f2;
  }

  th {
    font-weight: bold;
    border-bottom: 2px solid gray;
  }

  td,
  tr,
  th {
    padding: 5px;
  }

  td,
  tr,
  th {
    border: 1px solid gray;
  }

  tr {
    /*background: #555559;*/
  }
</style>


<div id="loadSpinner">
  <img style="margin: 0 auto; height: 50px; width: 50px;" src="http://awasudesign.vyqdy3k2nc1vkrjlhx.netdna-cdn.com/wp-content/uploads/2017/03/spinner-1.gif" />
  <p style="text-align: center;">
    Loading...
  </p>
</div>


<div id="content-well">
  <table id="revenueTable">
    <thead>
      <tr>
        <th>State</th>
        <th>Revenue Collected in FY2012</th>
      </tr>
    </thead>
    <tbody>
      <tr class="even stateRow" id="stateRowAlabama" >
        <td>Alabama</td>
        <td class="tdCell" id="ALRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowAlaska"  >
        <td>Alaska</td>
        <td class="tdCell" id="AKRevenue"></td>
      </tr>
      <tr class=even "stateRow" id="stateRowArizona" >
        <td>Arizona</td>
        <td class="tdCell" id="AZRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowArkansas"  >
        <td>Arkansas</td>
        <td class="tdCell" id="ARRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowCalifornia" >
        <td>California</td>
        <td class="tdCell" id="CARevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowColorado"  >
        <td>Colorado</td>
        <td class="tdCell" id="CORevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowConnecticut" >
        <td>Connecticut</td>
        <td class="tdCell" id="CTRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowDelaware"  >
        <td>Delaware</td>
        <td class="tdCell" id="DERevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowFlorida" >
        <td>Florida</td>
        <td class="tdCell" id="FLRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowGeorgia"  >
        <td>Georgia</td>
        <td class="tdCell" id="GARevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowHawaii" >
        <td>Hawaii</td>
        <td class="tdCell" id="HIRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowIdaho"  >
        <td>Idaho</td>
        <td class="tdCell" id="IDRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowIllinois" >
        <td>Illinois</td>
        <td class="tdCell" id="ILRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowIndiana"  >
        <td>Indiana</td>
        <td class="tdCell" id="INRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowIowa" >
        <td>Iowa</td>
        <td class="tdCell" id="IARevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowKansas"  >
        <td>Kansas</td>
        <td class="tdCell" id="KSRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowKentucky" >
        <td>Kentucky</td>
        <td class="tdCell" id="KYRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowLouisiana"  >
        <td>Louisiana</td>
        <td class="tdCell" id="LARevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowMaine" >
        <td>Maine</td>
        <td class="tdCell" id="MERevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowMaryland"  >
        <td>Maryland</td>
        <td class="tdCell" id="MDRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowMassachusetts" >
        <td>Massachusetts</td>
        <td class="tdCell" id="MARevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowMichigan"  >
        <td>Michigan</td>
        <td class="tdCell" id="MIRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowMinnesota" >
        <td>Minnesota</td>
        <td class="tdCell" id="MNRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowMississippi"  >
        <td>Mississippi</td>
        <td class="tdCell" id="MSRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowMissouri" >
        <td>Missouri</td>
        <td class="tdCell" id="MORevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowMontana"  >
        <td>Montana</td>
        <td class="tdCell" id="MTRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowNebraska" >
        <td>Nebraska</td>
        <td class="tdCell" id="NERevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowNevada"  >
        <td>Nevada</td>
        <td class="tdCell" id="NVRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowNewHampshire" >
        <td>New Hampshire</td>
        <td class="tdCell" id="NHRevenue"></td>

      </tr>
      <tr class="stateRow" id="stateRowNewJersey"  >
        <td>New Jersey</td>
        <td class="tdCell" id="NJRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowNewMexico" >
        <td>New Mexico</td>
        <td class="tdCell" id="NMRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowNewYork"  >
        <td>New York</td>
        <td class="tdCell" id="NYRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowNorthCarolina" >
        <td>North Carolina</td>
        <td class="tdCell" id="NCRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowNorthDakota"  >
        <td>North Dakota</td>
        <td class="tdCell" id="NDRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowOhio" >
        <td>Ohio</td>
        <td class="tdCell" id="OHRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowOklahoma"  >
        <td>Oklahoma</td>
        <td class="tdCell" id="OKRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowOregon" >
        <td>Oregon</td>
        <td class="tdCell" id="ORRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowPennsylvania"  >
        <td>Pennsylvania</td>
        <td class="tdCell" id="PARevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowRhodeIsland" >
        <td>Rhode Island</td>
        <td class="tdCell" id="RIRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowSouthCarolina"  >
        <td>South Carolina</td>
        <td class="tdCell" id="SCRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowSouthDakota" >
        <td>South Dakota</td>
        <td class="tdCell" id="SDRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowTennessee"  >
        <td>Tennessee</td>
        <td class="tdCell" id="TNRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowTexas" >
        <td>Texas</td>
        <td class="tdCell" id="TXRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowUtah"  >
        <td>Utah</td>
        <td class="tdCell" id="UTRevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowVermont" >
        <td>Vermont</td>
        <td class="tdCell" id="VTRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowVirginia"  >
        <td>Virginia</td>
        <td class="tdCell" id="VARevenue"></td>
      </tr>
      <tr class="even stateRow" id="stateRowWashington" >
        <td>Washington</td>
        <td class="tdCell" id="WARevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowWestVirginia"  >
        <td>West Virginia</td>
        <td class="tdCell" id="WVRevenue"></td>
    </tr>
      <tr class="even stateRow" id="stateRowWisconsin" >
        <td>Wisconsin</td>
        <td class="tdCell" id="WIRevenue"></td>
      </tr>
      <tr class="stateRow" id="stateRowWyoming"  >
        <td>Wyoming</td>
        <td class="tdCell" id="WYRevenue"></td>
    </tr>
      <tr class="even stateRow" id="stateRowDistrictofColumbia" >
        <td>District of Columbia</td>
        <td class="tdCell" id="DCRevenue"></td>
    </tr>
    </tbody>
  </table>
</div>

<script type="text/javascript">
  var states = ["AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME",
    "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA",
    "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY", "DC"
  ];


  var xmlSort = function() {
    $.each(states, function(key, currentState) {
      // console.log("currentState: " + currentState);
      $.ajax({
        type: "GET",
        url: "//www.lung.org/dev/slati/" + currentState + ".xml",
        dataType: "xml",
        success: function(xml) {
          $(xml).find('qryXMLSLATIDetail').each(function(i) {

            var Name = $(this).find('Name').text();
            var Abbrev = $(this).find('Abbrev').text();
            var Subcategory = $(this).find('Subcategory').text();
            var NumericValue = $(this).find('NumericValue').text();
            var NumericValueFixed = Number(NumericValue).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

            if (Subcategory == "Use of Cigarette Tax Revenue - Summary"){
              var shortened = Name.replace(/\s+/g, '');
              document.getElementById(Abbrev + "Revenue").innerHTML = "$"+NumericValueFixed;
            }
          });
        },
        error: function() {
          console.warn("An error occurred while processing XML file.");
          $("#loadSpinner").html("<p style='color: red;'>Error loading. Please refresh the page.</p>")
        }
      });
    })
    $("#loadSpinner").hide();
    $("#content-well").show();
  } //end xmlSort

  $(document).ready(function() {
    xmlSort();
  })
</script>
